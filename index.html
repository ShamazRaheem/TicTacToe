<!DOCTYPE html>
<html lang="ur">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Tic Tac Toe - JavaScript</title>
  <style>
    :root{
      --bg:#0f172a;
      --card:#0b1220;
      --accent:#7dd3fc;
      --accent-2:#60a5fa;
      --x-color:#ef4444;   
      --o-color:#34d399;   
      --muted:#94a3b8;
    }
    *{box-sizing:border-box;font-family:Inter, system-ui, -apple-system, "Segoe UI", Roboto, "Noto Sans", "Helvetica Neue", Arial;}
    body{
      margin:0;min-height:100vh;
      display:flex;align-items:center;justify-content:center;
      background:linear-gradient(180deg,#021026 0%, #071428 100%);
      color:white;padding:24px;
    }
    .card{
      background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));
      border-radius:12px; padding:20px; width:360px;
      box-shadow: 0 6px 30px rgba(2,6,23,0.7);
      border:1px solid rgba(255,255,255,0.04);
    }
    h1{font-size:20px;margin:0 0 12px 0;text-align:center}
    .top{
      display:flex;justify-content:space-between;align-items:center;margin-bottom:12px;
      gap:8px;
    }
    .status{font-size:14px;color:var(--muted)}
    .score{
      display:flex;gap:8px;align-items:center;
      font-size:13px;color:var(--muted);
    }
    .score span{background:rgba(255,255,255,0.02);padding:6px 8px;border-radius:8px}
    .board{
      display:grid;grid-template-columns:repeat(3,1fr);gap:8px;padding:8px;
      margin-bottom:12px;
    }
    .cell{
      background:rgba(255,255,255,0.02);aspect-ratio:1/1;border-radius:10px;
      display:flex;align-items:center;justify-content:center;font-size:40px;font-weight:700;
      cursor:pointer; user-select:none;
      transition:transform .08s ease, background .12s ease;
      box-shadow: inset 0 -6px 18px rgba(2,6,23,0.4);
    }
    .cell:hover{transform:translateY(-3px)}
    .cell.disabled{cursor:default;opacity:0.9}
    .cell.x{color:var(--x-color)}
    .cell.o{color:var(--o-color)}
    .cell.win{background:linear-gradient(90deg, rgba(125,211,252,0.08), rgba(96,165,250,0.06)); box-shadow:0 6px 18px rgba(96,165,250,0.08);}
    .controls{display:flex;gap:8px;justify-content:space-between;align-items:center}
    button{
      background:linear-gradient(180deg,var(--accent),var(--accent-2));
      border:none;color:#021028;padding:8px 10px;border-radius:8px;font-weight:600;cursor:pointer;
      box-shadow:0 6px 20px rgba(11,22,40,0.5);
    }
    button.ghost{background:transparent;border:1px solid rgba(255,255,255,0.05);color:var(--muted);box-shadow:none}
    small{display:block;text-align:center;margin-top:8px;color:var(--muted)}
    footer{font-size:11px;color:var(--muted);text-align:center;margin-top:12px}
  </style>
</head>
<body>
  <div class="card" role="application" aria-label="Tic Tac Toe game">
    <h1>Tic Tac Toe</h1>

    <div class="top">
      <div>
        <div class="status" id="status">Turn: <strong id="turn">X</strong></div>
        <div class="score" style="margin-top:6px">
          <span>Player X: <strong id="scoreX">0</strong></span>
          <span>Draws: <strong id="scoreD">0</strong></span>
          <span>Player O: <strong id="scoreO">0</strong></span>
        </div>
      </div>
      <div style="text-align:right">
        <button id="swapBtn" class="ghost" title="Swap who starts">Start: <span id="starterLabel">X</span></button>
      </div>
    </div>

    <div class="board" id="board" role="grid" aria-label="tic tac toe board">
      <!-- 9 cells generated by JS -->
    </div>

    <div class="controls">
      <button id="resetBtn">New Round</button>
      <button id="clearScore" class="ghost">Reset Scores</button>
    </div>

    <small id="message" aria-live="polite" style="margin-top:8px"></small>

    <footer>Save as a .html file and open in browser</footer>
  </div>

<script>
  // Game state
  const boardEl = document.getElementById('board');
  const statusTurn = document.getElementById('turn');
  const message = document.getElementById('message');
  const scoreXEl = document.getElementById('scoreX');
  const scoreOEl = document.getElementById('scoreO');
  const scoreDEl = document.getElementById('scoreD');
  const resetBtn = document.getElementById('resetBtn');
  const clearScore = document.getElementById('clearScore');
  const swapBtn = document.getElementById('swapBtn');
  const starterLabel = document.getElementById('starterLabel');

  const WIN_COMBOS = [
    [0,1,2],[3,4,5],[6,7,8], // rows
    [0,3,6],[1,4,7],[2,5,8], // cols
    [0,4,8],[2,4,6]          // diags
  ];

  let cells = []; // elements
  let board = Array(9).fill(null); // 'X' | 'O' | null
  let current = 'X';
  let running = true;
  let starter = 'X';

  // scores
  let score = { X: 0, O: 0, D: 0 };

  function createBoard(){
    boardEl.innerHTML = '';
    cells = [];
    for(let i=0;i<9;i++){
      const c = document.createElement('div');
      c.className = 'cell';
      c.setAttribute('role','button');
      c.setAttribute('aria-label', 'cell ' + (i+1));
      c.dataset.index = i;
      c.addEventListener('click', onCellClick);
      boardEl.appendChild(c);
      cells.push(c);
    }
  }

  function onCellClick(e){
    const idx = Number(e.currentTarget.dataset.index);
    if(!running || board[idx]) return;
    makeMove(idx, current);
    const result = checkResult();
    if(result){
      endGame(result);
    } else {
      current = current === 'X' ? 'O' : 'X';
      updateTurnUI();
    }
  }

  function makeMove(idx, player){
    board[idx] = player;
    const el = cells[idx];
    el.textContent = player;
    el.classList.add(player === 'X' ? 'x' : 'o', 'disabled');
  }

  function checkResult(){
    // check wins
    for(const combo of WIN_COMBOS){
      const [a,b,c] = combo;
      if(board[a] && board[a] === board[b] && board[a] === board[c]){
        return { winner: board[a], combo };
      }
    }
    // check draw
    if(board.every(cell => cell !== null)){
      return { winner: null }; // draw
    }
    return null; // game continues
  }

  function endGame(result){
    running = false;
    if(result.winner){
      // highlight winning cells
      result.combo.forEach(i => cells[i].classList.add('win'));
      message.textContent = `Player ${result.winner} jeet gaya!`;
      score[result.winner] += 1;
    } else {
      message.textContent = "Match draw hua.";
      score.D += 1;
    }
    updateScoresUI();
  }

  function updateTurnUI(){
    statusTurn.textContent = current;
    message.textContent = `Player ${current} ka turn`;
  }

  function updateScoresUI(){
    scoreXEl.textContent = score.X;
    scoreOEl.textContent = score.O;
    scoreDEl.textContent = score.D;
  }

  // New round: clear board but keep scores
  function newRound(){
    board.fill(null);
    for(const cell of cells){
      cell.textContent = '';
      cell.className = 'cell';
    }
    // starter alternates? keep same starter unless user changed
    current = starter;
    running = true;
    message.textContent = `Nayi round — Player ${current} start kar raha hai`;
    updateTurnUI();
  }

  // Swap who starts
  swapBtn.addEventListener('click', () => {
    starter = starter === 'X' ? 'O' : 'X';
    starterLabel.textContent = starter;
    // Start new round with new starter
    newRound();
  });

  resetBtn.addEventListener('click', () => {
    newRound();
  });

  clearScore.addEventListener('click', () => {
    score = { X: 0, O: 0, D: 0 };
    updateScoresUI();
    newRound();
  });
 
  // keyboard support: numbers 1-9 map to cells 0-8
  window.addEventListener('keydown', (e) => {
    if(!running) return;
    const key = e.key;
    if(/^[1-9]$/.test(key)){
      const idx = Number(key) - 1;
      if(!board[idx]) onCellClick({ currentTarget: cells[idx] });
    }
  });

  // init
  createBoard();
  updateTurnUI();
  updateScoresUI();
  message.textContent = "Game ready — cell par click karo ya 1-9 press karo";
</script>
